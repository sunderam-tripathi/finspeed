(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5],{3894:(e,t,r)=>{Promise.resolve().then(r.bind(r,9463))},7640:(e,t,r)=>{"use strict";r.d(t,{u:()=>n});let s=r(3542).env.NEXT_PUBLIC_API_URL||"/api/v1";class a{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="".concat(this.baseUrl).concat(e),s={"Content-Type":"application/json"};t.headers&&Object.assign(s,t.headers),this.token&&(s.Authorization="Bearer ".concat(this.token));let a=await fetch(r,{...t,headers:s});if(!a.ok)throw Error((await a.json().catch(()=>({error:"Unknown error"}))).error||"HTTP ".concat(a.status));return a.json()}async register(e,t){let r=await this.request("/auth/register",{method:"POST",body:JSON.stringify({email:e,password:t})});return this.setToken(r.token),r}async login(e,t){let r=await this.request("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})});return this.setToken(r.token),r}async getProducts(e){let t=new URLSearchParams;(null==e?void 0:e.page)&&t.set("page",e.page.toString()),(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString()),(null==e?void 0:e.category_id)&&t.set("category_id",e.category_id.toString()),(null==e?void 0:e.search)&&t.set("search",e.search);let r=t.toString();return this.request("/products".concat(r?"?".concat(r):""))}async getProduct(e){return this.request("/products/".concat(e))}async createProduct(e){return this.request("/admin/products",{method:"POST",body:JSON.stringify(e)})}async updateProduct(e,t){return this.request("/admin/products/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteProduct(e){return this.request("/admin/products/".concat(e),{method:"DELETE"})}async getCategories(e){let t=new URLSearchParams;(null==e?void 0:e.page)&&t.set("page",e.page.toString()),(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString()),(null==e?void 0:e.search)&&t.set("search",e.search);let r=t.toString();return this.request("/categories".concat(r?"?".concat(r):""))}async getCategory(e){return this.request("/categories/".concat(e))}async createCategory(e){return this.request("/admin/categories",{method:"POST",body:JSON.stringify(e)})}async updateCategory(e,t){return this.request("/admin/categories/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteCategory(e){return this.request("/admin/categories/".concat(e),{method:"DELETE"})}async getCart(){return this.request("/cart")}async addToCart(e,t){return this.request("/cart/items",{method:"POST",body:JSON.stringify({product_id:e,qty:t})})}async updateCartItem(e,t){return this.request("/cart/items/".concat(e),{method:"PUT",body:JSON.stringify({qty:t})})}async removeFromCart(e){return this.request("/cart/items/".concat(e),{method:"DELETE"})}async clearCart(){return this.request("/cart",{method:"DELETE"})}async getOrders(e){let t=new URLSearchParams;(null==e?void 0:e.page)&&t.set("page",e.page.toString()),(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString());let r=t.toString();return this.request("/orders".concat(r?"?".concat(r):""))}async getOrder(e){return this.request("/orders/".concat(e))}async createOrder(e,t){return this.request("/orders",{method:"POST",body:JSON.stringify({items:e,shipping_address:t})})}async healthCheck(){return this.request("/healthz")}async getUsers(e){let t=new URLSearchParams;(null==e?void 0:e.page)&&t.set("page",e.page.toString()),(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString()),(null==e?void 0:e.search)&&t.set("search",e.search);let r=t.toString();return this.request("/admin/users".concat(r?"?".concat(r):""))}async getUser(e){return this.request("/admin/users/".concat(e))}async updateUser(e,t){return this.request("/admin/users/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteUser(e){return this.request("/admin/users/".concat(e),{method:"DELETE"})}setToken(e){this.token=e,localStorage.setItem("finspeed_token",e)}clearToken(){this.token=null,localStorage.removeItem("finspeed_token")}getToken(){return this.token}isAuthenticated(){return!!this.token}constructor(){this.token=null,this.baseUrl=s,this.token=localStorage.getItem("finspeed_token")}}let n=new a},9463:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var s=r(881),a=r(5701),n=r(1857),c=r(721),l=r.n(c);let i=a.forwardRef(function(e,t){let{title:r,titleId:s,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}),o=a.forwardRef(function(e,t){let{title:r,titleId:s,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14"}))}),d=a.forwardRef(function(e,t){let{title:r,titleId:s,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))});var u=r(7640);function m(){let[e,t]=(0,a.useState)(null),[r,c]=(0,a.useState)(!0),[m,h]=(0,a.useState)(null);(0,a.useEffect)(()=>{g()},[]);let g=async()=>{try{c(!0);let e=await u.u.getCart();t(e)}catch(e){}finally{c(!1)}},y=async(e,r)=>{try{h(e);let s=await u.u.updateCartItem(e,r);t(s)}catch(e){}finally{h(null)}},x=async e=>{try{h(e);let r=await u.u.removeFromCart(e);t(r)}catch(e){}finally{h(null)}},p=async()=>{try{c(!0);let e=await u.u.clearCart();t(e)}catch(e){}finally{c(!1)}};return r?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):(0,s.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Shopping Cart"}),(0,s.jsx)("p",{className:"mt-2 text-gray-600",children:(null==e?void 0:e.count)?"".concat(e.count," item").concat(e.count>1?"s":""," in your cart"):"Your cart is empty"})]}),e&&0!==e.items.length?(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[e.items.map(e=>{var t;return(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,s.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,s.jsx)("div",{className:"flex-shrink-0 w-24 h-24 bg-gray-100 rounded-md overflow-hidden",children:(null==(t=e.product.images)?void 0:t[0])?(0,s.jsx)(n.default,{src:e.product.images[0].url,alt:e.product.title,width:96,height:96,className:"w-full h-full object-cover"}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:(0,s.jsx)("svg",{className:"w-8 h-8",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})})})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:(0,s.jsx)(l(),{href:"/products/".concat(e.product.slug),className:"hover:text-blue-600",children:e.product.title})}),e.product.category&&(0,s.jsx)("p",{className:"text-sm text-gray-500",children:e.product.category.name}),(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-900 mt-1",children:new Intl.NumberFormat("en-IN",{style:"currency",currency:e.product.currency||"INR"}).format(e.product.price)})]}),(0,s.jsx)("button",{onClick:()=>x(e.product_id),disabled:m===e.product_id,className:"text-red-600 hover:text-red-800 p-1",children:(0,s.jsx)(i,{className:"h-5 w-5"})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("button",{onClick:()=>y(e.product_id,e.qty-1),disabled:e.qty<=1||m===e.product_id,className:"p-1 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,s.jsx)(o,{className:"h-4 w-4"})}),(0,s.jsx)("span",{className:"text-lg font-medium w-8 text-center",children:e.qty}),(0,s.jsx)("button",{onClick:()=>y(e.product_id,e.qty+1),disabled:e.qty>=e.product.stock_qty||m===e.product_id,className:"p-1 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,s.jsx)(d,{className:"h-4 w-4"})})]}),(0,s.jsx)("div",{className:"text-lg font-semibold text-gray-900",children:new Intl.NumberFormat("en-IN",{style:"currency",currency:e.product.currency||"INR"}).format(e.subtotal)})]})]})]})},e.product_id)}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{onClick:p,className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Clear Cart"})})]}),(0,s.jsx)("div",{className:"lg:col-span-1",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 sticky top-8",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Summary"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Subtotal"}),(0,s.jsx)("span",{className:"text-gray-900",children:new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e.subtotal)})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Shipping"}),(0,s.jsx)("span",{className:"text-gray-900",children:e.subtotal>500?"Free":"₹50.00"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Tax (18% GST)"}),(0,s.jsx)("span",{className:"text-gray-900",children:new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(.18*e.subtotal)})]}),(0,s.jsx)("div",{className:"border-t pt-3",children:(0,s.jsxs)("div",{className:"flex justify-between text-lg font-semibold",children:[(0,s.jsx)("span",{className:"text-gray-900",children:"Total"}),(0,s.jsx)("span",{className:"text-gray-900",children:new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e.subtotal+(e.subtotal>500?0:50)+.18*e.subtotal)})]})})]}),(0,s.jsxs)("div",{className:"mt-6 space-y-3",children:[(0,s.jsx)(l(),{href:"/checkout",className:"w-full bg-blue-600 text-white py-3 px-4 rounded-md font-medium hover:bg-blue-700 text-center block",children:"Proceed to Checkout"}),(0,s.jsx)(l(),{href:"/products",className:"w-full bg-gray-100 text-gray-900 py-3 px-4 rounded-md font-medium hover:bg-gray-200 text-center block",children:"Continue Shopping"})]}),e.subtotal<500&&(0,s.jsx)("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:(0,s.jsxs)("p",{className:"text-sm text-blue-800",children:["Add ₹",(500-e.subtotal).toFixed(2)," more for free shipping!"]})})]})})]}):(0,s.jsxs)("div",{className:"text-center py-16",children:[(0,s.jsx)("div",{className:"text-gray-400 mb-4",children:(0,s.jsx)("svg",{className:"w-24 h-24 mx-auto",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 2L3 7v11a2 2 0 002 2h10a2 2 0 002-2V7l-7-5z",clipRule:"evenodd"})})}),(0,s.jsx)("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"Your cart is empty"}),(0,s.jsx)("p",{className:"text-gray-500 mb-6",children:"Start shopping to add items to your cart"}),(0,s.jsx)(l(),{href:"/products",className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:"Continue Shopping"})]})]})})}}},e=>{e.O(0,[721,857,803,447,358],()=>e(e.s=3894)),_N_E=e.O()}]);