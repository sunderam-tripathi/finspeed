(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{6203:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(881),a=r(5701),i=r(7640);function n(){let[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)([]),[o,l]=(0,a.useState)(!0),[c,d]=(0,a.useState)(null),[u,m]=(0,a.useState)("products"),[g,h]=(0,a.useState)({title:"",slug:"",price:0,sku:"",stock_qty:0,category_id:null}),[y,p]=(0,a.useState)({name:"",slug:"",parent_id:null});(0,a.useEffect)(()=>{x()},[]);let x=async()=>{try{l(!0);let[e,r]=await Promise.all([i.u.getProducts({limit:50}),i.u.getCategories()]);t(e.products||[]),n(r.categories||[]),d(null)}catch(e){d(e instanceof Error?e.message:"Failed to load data")}finally{l(!1)}},b=async e=>{e.preventDefault();try{var t;let e={title:g.title,slug:g.slug,price:g.price,sku:g.sku.trim()?g.sku:void 0,stock_qty:g.stock_qty,category_id:null!=(t=g.category_id)?t:void 0,currency:"INR"};await i.u.createProduct(e),h({title:"",slug:"",price:0,sku:"",stock_qty:0,category_id:null}),x()}catch(e){d(e instanceof Error?e.message:"Failed to create product")}},f=async e=>{e.preventDefault();try{var t;await i.u.createCategory({name:y.name,slug:y.slug,parent_id:null!=(t=y.parent_id)?t:void 0}),p({name:"",slug:"",parent_id:null}),x()}catch(e){d(e instanceof Error?e.message:"Failed to create category")}};return o?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}):(0,s.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),(0,s.jsx)("p",{className:"mt-2 text-gray-600",children:"Manage products and categories"})]}),c&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:(0,s.jsx)("div",{className:"text-red-800",children:c})}),(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsx)("div",{className:"border-b border-gray-200",children:(0,s.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,s.jsxs)("button",{onClick:()=>m("products"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("products"===u?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:["Products (",e.length,")"]}),(0,s.jsxs)("button",{onClick:()=>m("categories"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("categories"===u?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:["Categories (",r.length,")"]})]})})}),"products"===u&&(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Create New Product"}),(0,s.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Title"}),(0,s.jsx)("input",{type:"text",required:!0,value:g.title,onChange:e=>h({...g,title:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Slug"}),(0,s.jsx)("input",{type:"text",required:!0,value:g.slug,onChange:e=>h({...g,slug:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Price (INR)"}),(0,s.jsx)("input",{type:"number",required:!0,min:"0",step:"0.01",value:g.price,onChange:e=>h({...g,price:parseFloat(e.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Stock Quantity"}),(0,s.jsx)("input",{type:"number",required:!0,min:"0",value:g.stock_qty,onChange:e=>h({...g,stock_qty:parseInt(e.target.value)}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"SKU"}),(0,s.jsx)("input",{type:"text",value:g.sku,onChange:e=>h({...g,sku:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),(0,s.jsxs)("select",{value:g.category_id||"",onChange:e=>h({...g,category_id:e.target.value?parseInt(e.target.value):null}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[(0,s.jsx)("option",{value:"",children:"Select a category"}),r.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsx)("button",{type:"submit",className:"w-full btn-primary",children:"Create Product"})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Products"}),(0,s.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:e.map(e=>{var t;return(0,s.jsx)("div",{className:"border border-gray-200 rounded-md p-3",children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900",children:e.title}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["SKU: ",e.sku||"N/A"]}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Stock: ",e.stock_qty]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"font-semibold text-gray-900",children:["â‚¹",e.price.toLocaleString("en-IN")]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:null==(t=e.category)?void 0:t.name})]})]})},e.id)})})]})]}),"categories"===u&&(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Create New Category"}),(0,s.jsxs)("form",{onSubmit:f,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,s.jsx)("input",{type:"text",required:!0,value:y.name,onChange:e=>p({...y,name:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Slug"}),(0,s.jsx)("input",{type:"text",required:!0,value:y.slug,onChange:e=>p({...y,slug:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Parent Category"}),(0,s.jsxs)("select",{value:y.parent_id||"",onChange:e=>p({...y,parent_id:e.target.value?parseInt(e.target.value):null}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-primary-500 focus:border-primary-500",children:[(0,s.jsx)("option",{value:"",children:"No parent (top-level)"}),r.filter(e=>!e.parent_id).map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsx)("button",{type:"submit",className:"w-full btn-primary",children:"Create Category"})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Categories"}),(0,s.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:r.map(e=>{var t;return(0,s.jsx)("div",{className:"border border-gray-200 rounded-md p-3",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900",children:e.name}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Slug: ",e.slug]}),e.parent_id&&(0,s.jsxs)("p",{className:"text-xs text-gray-400",children:["Parent: ",null==(t=r.find(t=>t.id===e.parent_id))?void 0:t.name]})]}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",e.id]})]})},e.id)})})]})]})]})})}},7165:(e,t,r)=>{Promise.resolve().then(r.bind(r,6203))},7640:(e,t,r)=>{"use strict";r.d(t,{u:()=>i});let s=r(3542).env.NEXT_PUBLIC_API_URL||"/api/v1";class a{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="".concat(this.baseUrl).concat(e),s={"Content-Type":"application/json"};t.headers&&Object.assign(s,t.headers),this.token&&(s.Authorization="Bearer ".concat(this.token));let a=await fetch(r,{...t,headers:s});if(!a.ok)throw Error((await a.json().catch(()=>({error:"Unknown error"}))).error||"HTTP ".concat(a.status));return a.json()}async register(e,t){let r=await this.request("/auth/register",{method:"POST",body:JSON.stringify({email:e,password:t})});return this.setToken(r.token),r}async login(e,t){let r=await this.request("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})});return this.setToken(r.token),r}async getProducts(e){let t=new URLSearchParams;(null==e?void 0:e.page)&&t.set("page",e.page.toString()),(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString()),(null==e?void 0:e.category_id)&&t.set("category_id",e.category_id.toString()),(null==e?void 0:e.search)&&t.set("search",e.search);let r=t.toString();return this.request("/products".concat(r?"?".concat(r):""))}async getProduct(e){return this.request("/products/".concat(e))}async createProduct(e){return this.request("/admin/products",{method:"POST",body:JSON.stringify(e)})}async updateProduct(e,t){return this.request("/admin/products/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteProduct(e){return this.request("/admin/products/".concat(e),{method:"DELETE"})}async getCategories(e){let t=new URLSearchParams;(null==e?void 0:e.page)&&t.set("page",e.page.toString()),(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString()),(null==e?void 0:e.search)&&t.set("search",e.search);let r=t.toString();return this.request("/categories".concat(r?"?".concat(r):""))}async getCategory(e){return this.request("/categories/".concat(e))}async createCategory(e){return this.request("/admin/categories",{method:"POST",body:JSON.stringify(e)})}async updateCategory(e,t){return this.request("/admin/categories/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteCategory(e){return this.request("/admin/categories/".concat(e),{method:"DELETE"})}async getCart(){return this.request("/cart")}async addToCart(e,t){return this.request("/cart/items",{method:"POST",body:JSON.stringify({product_id:e,qty:t})})}async updateCartItem(e,t){return this.request("/cart/items/".concat(e),{method:"PUT",body:JSON.stringify({qty:t})})}async removeFromCart(e){return this.request("/cart/items/".concat(e),{method:"DELETE"})}async clearCart(){return this.request("/cart",{method:"DELETE"})}async getOrders(e){let t=new URLSearchParams;(null==e?void 0:e.page)&&t.set("page",e.page.toString()),(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString());let r=t.toString();return this.request("/orders".concat(r?"?".concat(r):""))}async getOrder(e){return this.request("/orders/".concat(e))}async createOrder(e,t){return this.request("/orders",{method:"POST",body:JSON.stringify({items:e,shipping_address:t})})}async healthCheck(){return this.request("/healthz")}async getUsers(e){let t=new URLSearchParams;(null==e?void 0:e.page)&&t.set("page",e.page.toString()),(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString()),(null==e?void 0:e.search)&&t.set("search",e.search);let r=t.toString();return this.request("/admin/users".concat(r?"?".concat(r):""))}async getUser(e){return this.request("/admin/users/".concat(e))}async updateUser(e,t){return this.request("/admin/users/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteUser(e){return this.request("/admin/users/".concat(e),{method:"DELETE"})}setToken(e){this.token=e,localStorage.setItem("finspeed_token",e)}clearToken(){this.token=null,localStorage.removeItem("finspeed_token")}getToken(){return this.token}isAuthenticated(){return!!this.token}constructor(){this.token=null,this.baseUrl=s,this.token=localStorage.getItem("finspeed_token")}}let i=new a}},e=>{e.O(0,[803,447,358],()=>e(e.s=7165)),_N_E=e.O()}]);