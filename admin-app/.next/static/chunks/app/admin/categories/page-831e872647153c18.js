(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[631],{7062:(e,t,r)=>{Promise.resolve().then(r.bind(r,8788))},7640:(e,t,r)=>{"use strict";r.d(t,{u:()=>n});let s=r(3542).env.NEXT_PUBLIC_API_URL||"/api/v1";class a{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="".concat(this.baseUrl).concat(e),s={"Content-Type":"application/json"};t.headers&&Object.assign(s,t.headers),this.token&&(s.Authorization="Bearer ".concat(this.token));let a=await fetch(r,{...t,headers:s});if(!a.ok)throw Error((await a.json().catch(()=>({error:"Unknown error"}))).error||"HTTP ".concat(a.status));return a.json()}async register(e,t){let r=await this.request("/auth/register",{method:"POST",body:JSON.stringify({email:e,password:t})});return this.setToken(r.token),r}async login(e,t){let r=await this.request("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})});return this.setToken(r.token),r}async getProducts(e){let t=new URLSearchParams;(null==e?void 0:e.page)&&t.set("page",e.page.toString()),(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString()),(null==e?void 0:e.category_id)&&t.set("category_id",e.category_id.toString()),(null==e?void 0:e.search)&&t.set("search",e.search);let r=t.toString();return this.request("/products".concat(r?"?".concat(r):""))}async getProduct(e){return this.request("/products/".concat(e))}async createProduct(e){return this.request("/admin/products",{method:"POST",body:JSON.stringify(e)})}async updateProduct(e,t){return this.request("/admin/products/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteProduct(e){return this.request("/admin/products/".concat(e),{method:"DELETE"})}async getCategories(e){let t=new URLSearchParams;(null==e?void 0:e.page)&&t.set("page",e.page.toString()),(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString()),(null==e?void 0:e.search)&&t.set("search",e.search);let r=t.toString();return this.request("/categories".concat(r?"?".concat(r):""))}async getCategory(e){return this.request("/categories/".concat(e))}async createCategory(e){return this.request("/admin/categories",{method:"POST",body:JSON.stringify(e)})}async updateCategory(e,t){return this.request("/admin/categories/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteCategory(e){return this.request("/admin/categories/".concat(e),{method:"DELETE"})}async getCart(){return this.request("/cart")}async addToCart(e,t){return this.request("/cart/items",{method:"POST",body:JSON.stringify({product_id:e,qty:t})})}async updateCartItem(e,t){return this.request("/cart/items/".concat(e),{method:"PUT",body:JSON.stringify({qty:t})})}async removeFromCart(e){return this.request("/cart/items/".concat(e),{method:"DELETE"})}async clearCart(){return this.request("/cart",{method:"DELETE"})}async getOrders(e){let t=new URLSearchParams;(null==e?void 0:e.page)&&t.set("page",e.page.toString()),(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString());let r=t.toString();return this.request("/orders".concat(r?"?".concat(r):""))}async getOrder(e){return this.request("/orders/".concat(e))}async createOrder(e,t){return this.request("/orders",{method:"POST",body:JSON.stringify({items:e,shipping_address:t})})}async healthCheck(){return this.request("/healthz")}async getUsers(e){let t=new URLSearchParams;(null==e?void 0:e.page)&&t.set("page",e.page.toString()),(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString()),(null==e?void 0:e.search)&&t.set("search",e.search);let r=t.toString();return this.request("/admin/users".concat(r?"?".concat(r):""))}async getUser(e){return this.request("/admin/users/".concat(e))}async updateUser(e,t){return this.request("/admin/users/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteUser(e){return this.request("/admin/users/".concat(e),{method:"DELETE"})}setToken(e){this.token=e,localStorage.setItem("finspeed_token",e)}clearToken(){this.token=null,localStorage.removeItem("finspeed_token")}getToken(){return this.token}isAuthenticated(){return!!this.token}constructor(){this.token=null,this.baseUrl=s,this.token=localStorage.getItem("finspeed_token")}}let n=new a},8788:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(881),a=r(5701);function n(e){var t;let{category:r,onClose:n,onSave:i}=e,[o,c]=(0,a.useState)(r||{name:"",slug:"",description:""}),l=e=>{let{name:t,value:r}=e.target;c(e=>({...e,[t]:r}))};return r?(0,s.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,s.jsxs)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:[(0,s.jsx)("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:r.id?"Edit Category":"Add Category"}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i(o)},className:"mt-4 space-y-4",children:[(0,s.jsx)("input",{type:"text",name:"name",value:o.name,onChange:l,placeholder:"Name",className:"w-full p-2 border rounded",required:!0}),(0,s.jsx)("input",{type:"text",name:"slug",value:o.slug,onChange:l,placeholder:"Slug",className:"w-full p-2 border rounded",required:!0}),(0,s.jsx)("textarea",{name:"description",value:null!=(t=o.description)?t:"",onChange:l,placeholder:"Description",className:"w-full p-2 border rounded"}),(0,s.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,s.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Save"})]})]})]})}):null}var i=r(7640);function o(){let[e,t]=(0,a.useState)([]),[r,o]=(0,a.useState)(!0),[c,l]=(0,a.useState)(null),[d,u]=(0,a.useState)(!1),[h,g]=(0,a.useState)(null),[m,y]=(0,a.useState)(0),[p,x]=(0,a.useState)(1),[b]=(0,a.useState)(10),[f,v]=(0,a.useState)(""),S=(0,a.useCallback)(async(e,r)=>{o(!0);try{var s;let a=await i.u.getCategories({page:e,limit:b,search:r||void 0});t(a.categories||[]),y(a.total||0),x(null!=(s=a.page)?s:e),l(null)}catch(e){l(e instanceof Error?e.message:"Failed to fetch categories")}finally{o(!1)}},[b]);(0,a.useEffect)(()=>{let e=setTimeout(()=>{S(p,f)},500);return()=>clearTimeout(e)},[S,p,f]);let N=()=>{u(!1),g(null)},w=async e=>{if(window.confirm("Are you sure you want to delete this category?"))try{await i.u.deleteCategory(e),await S(p,f)}catch(e){l(e instanceof Error?e.message:"Failed to delete category")}},j=async e=>{try{var t;let r={name:e.name,slug:e.slug,description:null!=(t=e.description)?t:null};e.id?await i.u.updateCategory(e.id,r):await i.u.createCategory(r),N(),await S(p,f)}catch(e){l(e instanceof Error?e.message:"Failed to save category")}};return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Categories"}),(0,s.jsx)("button",{onClick:()=>{g({id:0,name:"",slug:"",description:""}),u(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Add Category"})]}),(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)("input",{type:"text",placeholder:"Search categories by name or slug...",value:f,onChange:e=>v(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})}),r&&(0,s.jsx)("p",{children:"Loading categories..."}),c&&(0,s.jsxs)("p",{className:"text-red-500",children:["Error: ",c]}),!r&&!c&&(0,s.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Slug"}),(0,s.jsx)("th",{scope:"col",className:"relative px-6 py-3",children:(0,s.jsx)("span",{className:"sr-only",children:"Edit"})})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.slug}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,s.jsx)("button",{onClick:()=>{g(e),u(!0)},className:"text-indigo-600 hover:text-indigo-900",children:"Edit"}),(0,s.jsx)("button",{onClick:()=>w(e.id),className:"text-red-600 hover:text-red-900 ml-4",children:"Delete"})]})]},e.id))})]})}),!r&&!c&&m>b&&(0,s.jsxs)("div",{className:"mt-6 flex justify-center items-center",children:[(0,s.jsx)("button",{onClick:()=>x(e=>Math.max(e-1,1)),disabled:1===p,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),(0,s.jsxs)("span",{className:"mx-4 text-sm text-gray-600",children:["Page ",p," of ",Math.ceil(m/b)]}),(0,s.jsx)("button",{onClick:()=>x(e=>e*b<m?e+1:e),disabled:p*b>=m,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),d&&h&&(0,s.jsx)(n,{category:h,onClose:N,onSave:j})]})}}},e=>{e.O(0,[803,447,358],()=>e(e.s=7062)),_N_E=e.O()}]);