(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[859],{1858:(e,t,r)=>{"use strict";var s=r(3638);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},1904:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(881),a=r(5701),n=r(1858),i=r(721),o=r.n(i),c=r(7640);function d(){let[e,t]=(0,a.useState)(""),[r,i]=(0,a.useState)(""),[d,l]=(0,a.useState)(!1),[u,m]=(0,a.useState)(null),h=(0,n.useRouter)(),g=async t=>{t.preventDefault(),l(!0),m(null);try{let t=await c.u.login(e,r);"admin"===t.user.role?h.push("/admin"):h.push("/products")}catch(e){m(e instanceof Error?e.message:"Login failed")}finally{l(!1)}};return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[(0,s.jsx)("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(o(),{href:"/",className:"text-3xl font-bold text-primary-600",children:"Finspeed"}),(0,s.jsx)("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Sign in to your account"}),(0,s.jsxs)("p",{className:"mt-2 text-sm text-gray-600",children:["Or"," ",(0,s.jsx)(o(),{href:"/auth/register",className:"font-medium text-primary-600 hover:text-primary-500",children:"create a new account"})]})]})}),(0,s.jsx)("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:(0,s.jsxs)("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[(0,s.jsxs)("form",{className:"space-y-6",onSubmit:g,children:[u&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,s.jsx)("div",{className:"text-red-800 text-sm",children:u})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),(0,s.jsx)("div",{className:"mt-1",children:(0,s.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:e=>t(e.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Enter your email"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,s.jsx)("div",{className:"mt-1",children:(0,s.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:r,onChange:e=>i(e.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Enter your password"})})]}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"submit",disabled:d,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Signing in...":"Sign in"})})]}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsxs)("div",{className:"text-center text-sm text-gray-600",children:[(0,s.jsx)("p",{children:"Test accounts:"}),(0,s.jsxs)("p",{className:"mt-1",children:[(0,s.jsx)("strong",{children:"Admin:"})," admin@finspeed.online / admin123",(0,s.jsx)("br",{}),(0,s.jsx)("strong",{children:"Customer:"})," customer@example.com / customer123"]})]})})]})})]})}},3242:(e,t,r)=>{Promise.resolve().then(r.bind(r,1904))},7640:(e,t,r)=>{"use strict";r.d(t,{u:()=>n});let s=r(3542).env.NEXT_PUBLIC_API_URL||"/api/v1";class a{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="".concat(this.baseUrl).concat(e),s={"Content-Type":"application/json"};t.headers&&Object.assign(s,t.headers),this.token&&(s.Authorization="Bearer ".concat(this.token));let a=await fetch(r,{...t,headers:s});if(!a.ok)throw Error((await a.json().catch(()=>({error:"Unknown error"}))).error||"HTTP ".concat(a.status));return a.json()}async register(e,t){let r=await this.request("/auth/register",{method:"POST",body:JSON.stringify({email:e,password:t})});return this.setToken(r.token),r}async login(e,t){let r=await this.request("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})});return this.setToken(r.token),r}async getProducts(e){let t=new URLSearchParams;(null==e?void 0:e.page)&&t.set("page",e.page.toString()),(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString()),(null==e?void 0:e.category_id)&&t.set("category_id",e.category_id.toString()),(null==e?void 0:e.search)&&t.set("search",e.search);let r=t.toString();return this.request("/products".concat(r?"?".concat(r):""))}async getProduct(e){return this.request("/products/".concat(e))}async createProduct(e){return this.request("/admin/products",{method:"POST",body:JSON.stringify(e)})}async updateProduct(e,t){return this.request("/admin/products/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteProduct(e){return this.request("/admin/products/".concat(e),{method:"DELETE"})}async getCategories(e){let t=new URLSearchParams;(null==e?void 0:e.page)&&t.set("page",e.page.toString()),(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString()),(null==e?void 0:e.search)&&t.set("search",e.search);let r=t.toString();return this.request("/categories".concat(r?"?".concat(r):""))}async getCategory(e){return this.request("/categories/".concat(e))}async createCategory(e){return this.request("/admin/categories",{method:"POST",body:JSON.stringify(e)})}async updateCategory(e,t){return this.request("/admin/categories/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteCategory(e){return this.request("/admin/categories/".concat(e),{method:"DELETE"})}async getCart(){return this.request("/cart")}async addToCart(e,t){return this.request("/cart/items",{method:"POST",body:JSON.stringify({product_id:e,qty:t})})}async updateCartItem(e,t){return this.request("/cart/items/".concat(e),{method:"PUT",body:JSON.stringify({qty:t})})}async removeFromCart(e){return this.request("/cart/items/".concat(e),{method:"DELETE"})}async clearCart(){return this.request("/cart",{method:"DELETE"})}async getOrders(e){let t=new URLSearchParams;(null==e?void 0:e.page)&&t.set("page",e.page.toString()),(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString());let r=t.toString();return this.request("/orders".concat(r?"?".concat(r):""))}async getOrder(e){return this.request("/orders/".concat(e))}async createOrder(e,t){return this.request("/orders",{method:"POST",body:JSON.stringify({items:e,shipping_address:t})})}async healthCheck(){return this.request("/healthz")}async getUsers(e){let t=new URLSearchParams;(null==e?void 0:e.page)&&t.set("page",e.page.toString()),(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString()),(null==e?void 0:e.search)&&t.set("search",e.search);let r=t.toString();return this.request("/admin/users".concat(r?"?".concat(r):""))}async getUser(e){return this.request("/admin/users/".concat(e))}async updateUser(e,t){return this.request("/admin/users/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteUser(e){return this.request("/admin/users/".concat(e),{method:"DELETE"})}setToken(e){this.token=e,localStorage.setItem("finspeed_token",e)}clearToken(){this.token=null,localStorage.removeItem("finspeed_token")}getToken(){return this.token}isAuthenticated(){return!!this.token}constructor(){this.token=null,this.baseUrl=s,this.token=localStorage.getItem("finspeed_token")}}let n=new a}},e=>{e.O(0,[721,803,447,358],()=>e(e.s=3242)),_N_E=e.O()}]);