(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[279],{1048:(e,t,r)=>{Promise.resolve().then(r.bind(r,5730))},1858:(e,t,r)=>{"use strict";var s=r(3638);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},4061:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return a}});let s=r(5701);function a(e,t){let r=(0,s.useRef)(null),a=(0,s.useRef)(null);return(0,s.useCallback)(s=>{if(null===s){let e=r.current;e&&(r.current=null,e());let t=a.current;t&&(a.current=null,t())}else e&&(r.current=n(e,s)),t&&(a.current=n(t,s))},[e,t])}function n(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},5730:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(881),a=r(5701),n=r(1858),l=r(1857);let i=a.forwardRef(function(e,t){let{title:r,titleId:s,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"}))}),o=a.forwardRef(function(e,t){let{title:r,titleId:s,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}))});var c=r(7640);function d(){let e=(0,n.useRouter)(),[t,r]=(0,a.useState)(null),[d,u]=(0,a.useState)(!0),[m,h]=(0,a.useState)(!1),[g,x]=(0,a.useState)(!1),[y,p]=(0,a.useState)({name:"",phone:"",address1:"",address2:"",city:"",state:"",pincode:"",country:"India"});(0,a.useEffect)(()=>{(async()=>{let t=c.u.isAuthenticated();if(x(t),!t)return e.push("/auth/login?redirect=/checkout");try{u(!0);let t=await c.u.getCart();r(t),t&&0!==t.items.length||e.push("/cart")}catch(e){}finally{u(!1)}})()},[e]);let f=e=>{let{name:t,value:r}=e.target;p(e=>({...e,[t]:r}))},b=async r=>{if(r.preventDefault(),t&&0!==t.items.length)try{h(!0);let r=t.items.map(e=>({product_id:e.product_id,qty:e.qty})),s=await c.u.createOrder(r,y);await c.u.clearCart(),e.push("/orders/".concat(s.order_id,"?success=true"))}catch(e){alert("Failed to place order. Please try again.")}finally{h(!1)}};if(d)return(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})});if(!g||!t||0===t.items.length)return null;let j=t.subtotal>500?0:50,v=.18*t.subtotal,N=t.subtotal+j+v;return(0,s.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Checkout"}),(0,s.jsx)("p",{className:"mt-2 text-gray-600",children:"Complete your order securely"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Shipping Information"}),(0,s.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),(0,s.jsx)("input",{type:"text",id:"name",name:"name",required:!0,value:y.name,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),(0,s.jsx)("input",{type:"tel",id:"phone",name:"phone",required:!0,value:y.phone,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"address1",className:"block text-sm font-medium text-gray-700 mb-1",children:"Address Line 1 *"}),(0,s.jsx)("input",{type:"text",id:"address1",name:"address1",required:!0,value:y.address1,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"address2",className:"block text-sm font-medium text-gray-700 mb-1",children:"Address Line 2"}),(0,s.jsx)("input",{type:"text",id:"address2",name:"address2",value:y.address2,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),(0,s.jsx)("input",{type:"text",id:"city",name:"city",required:!0,value:y.city,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"state",className:"block text-sm font-medium text-gray-700 mb-1",children:"State *"}),(0,s.jsxs)("select",{id:"state",name:"state",required:!0,value:y.state,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",children:[(0,s.jsx)("option",{value:"",children:"Select State"}),(0,s.jsx)("option",{value:"Andhra Pradesh",children:"Andhra Pradesh"}),(0,s.jsx)("option",{value:"Karnataka",children:"Karnataka"}),(0,s.jsx)("option",{value:"Maharashtra",children:"Maharashtra"}),(0,s.jsx)("option",{value:"Tamil Nadu",children:"Tamil Nadu"}),(0,s.jsx)("option",{value:"Delhi",children:"Delhi"}),(0,s.jsx)("option",{value:"Gujarat",children:"Gujarat"}),(0,s.jsx)("option",{value:"Rajasthan",children:"Rajasthan"}),(0,s.jsx)("option",{value:"West Bengal",children:"West Bengal"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"pincode",className:"block text-sm font-medium text-gray-700 mb-1",children:"Pincode *"}),(0,s.jsx)("input",{type:"text",id:"pincode",name:"pincode",required:!0,pattern:"[0-9]{6}",value:y.pincode,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,s.jsxs)("div",{className:"mt-8",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment Method"}),(0,s.jsxs)("div",{className:"border border-gray-300 rounded-md p-4",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(i,{className:"h-6 w-6 text-gray-400 mr-3"}),(0,s.jsx)("span",{className:"text-gray-700",children:"Cash on Delivery (COD)"})]}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Pay when your order is delivered to your doorstep."})]})]}),(0,s.jsxs)("button",{type:"submit",disabled:m,className:"w-full mt-8 bg-blue-600 text-white py-3 px-4 rounded-md font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:[m?(0,s.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}):(0,s.jsx)(o,{className:"h-5 w-5 mr-2"}),m?"Placing Order...":"Place Order"]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Order Summary"}),(0,s.jsx)("div",{className:"space-y-4 mb-6",children:t.items.map(e=>{var t;return(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"flex-shrink-0 w-16 h-16 bg-gray-100 rounded-md overflow-hidden",children:(null==(t=e.product.images)?void 0:t[0])?(0,s.jsx)(l.default,{src:e.product.images[0].url,alt:e.product.title,width:64,height:64,className:"w-full h-full object-cover"}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})})})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-900 truncate",children:e.product.title}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Qty: ",e.qty]})]}),(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e.subtotal)})]},e.product_id)})}),(0,s.jsxs)("div",{className:"border-t pt-4 space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Subtotal"}),(0,s.jsx)("span",{className:"text-gray-900",children:new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(t.subtotal)})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Shipping"}),(0,s.jsx)("span",{className:"text-gray-900",children:0===j?"Free":"₹".concat(j.toFixed(2))})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Tax (18% GST)"}),(0,s.jsx)("span",{className:"text-gray-900",children:new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(v)})]}),(0,s.jsx)("div",{className:"border-t pt-3",children:(0,s.jsxs)("div",{className:"flex justify-between text-lg font-semibold",children:[(0,s.jsx)("span",{className:"text-gray-900",children:"Total"}),(0,s.jsx)("span",{className:"text-gray-900",children:new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(N)})]})})]}),(0,s.jsx)("div",{className:"mt-6 p-3 bg-green-50 border border-green-200 rounded-md",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(o,{className:"h-5 w-5 text-green-600 mr-2"}),(0,s.jsx)("span",{className:"text-sm text-green-800",children:"Your order information is secure and encrypted"})]})})]})]})]})})}},7640:(e,t,r)=>{"use strict";r.d(t,{u:()=>n});let s=r(3542).env.NEXT_PUBLIC_API_URL||"/api/v1";class a{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="".concat(this.baseUrl).concat(e),s={"Content-Type":"application/json"};t.headers&&Object.assign(s,t.headers),this.token&&(s.Authorization="Bearer ".concat(this.token));let a=await fetch(r,{...t,headers:s});if(!a.ok)throw Error((await a.json().catch(()=>({error:"Unknown error"}))).error||"HTTP ".concat(a.status));return a.json()}async register(e,t){let r=await this.request("/auth/register",{method:"POST",body:JSON.stringify({email:e,password:t})});return this.setToken(r.token),r}async login(e,t){let r=await this.request("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})});return this.setToken(r.token),r}async getProducts(e){let t=new URLSearchParams;(null==e?void 0:e.page)&&t.set("page",e.page.toString()),(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString()),(null==e?void 0:e.category_id)&&t.set("category_id",e.category_id.toString()),(null==e?void 0:e.search)&&t.set("search",e.search);let r=t.toString();return this.request("/products".concat(r?"?".concat(r):""))}async getProduct(e){return this.request("/products/".concat(e))}async createProduct(e){return this.request("/admin/products",{method:"POST",body:JSON.stringify(e)})}async updateProduct(e,t){return this.request("/admin/products/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteProduct(e){return this.request("/admin/products/".concat(e),{method:"DELETE"})}async getCategories(e){let t=new URLSearchParams;(null==e?void 0:e.page)&&t.set("page",e.page.toString()),(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString()),(null==e?void 0:e.search)&&t.set("search",e.search);let r=t.toString();return this.request("/categories".concat(r?"?".concat(r):""))}async getCategory(e){return this.request("/categories/".concat(e))}async createCategory(e){return this.request("/admin/categories",{method:"POST",body:JSON.stringify(e)})}async updateCategory(e,t){return this.request("/admin/categories/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteCategory(e){return this.request("/admin/categories/".concat(e),{method:"DELETE"})}async getCart(){return this.request("/cart")}async addToCart(e,t){return this.request("/cart/items",{method:"POST",body:JSON.stringify({product_id:e,qty:t})})}async updateCartItem(e,t){return this.request("/cart/items/".concat(e),{method:"PUT",body:JSON.stringify({qty:t})})}async removeFromCart(e){return this.request("/cart/items/".concat(e),{method:"DELETE"})}async clearCart(){return this.request("/cart",{method:"DELETE"})}async getOrders(e){let t=new URLSearchParams;(null==e?void 0:e.page)&&t.set("page",e.page.toString()),(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString());let r=t.toString();return this.request("/orders".concat(r?"?".concat(r):""))}async getOrder(e){return this.request("/orders/".concat(e))}async createOrder(e,t){return this.request("/orders",{method:"POST",body:JSON.stringify({items:e,shipping_address:t})})}async healthCheck(){return this.request("/healthz")}async getUsers(e){let t=new URLSearchParams;(null==e?void 0:e.page)&&t.set("page",e.page.toString()),(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString()),(null==e?void 0:e.search)&&t.set("search",e.search);let r=t.toString();return this.request("/admin/users".concat(r?"?".concat(r):""))}async getUser(e){return this.request("/admin/users/".concat(e))}async updateUser(e,t){return this.request("/admin/users/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteUser(e){return this.request("/admin/users/".concat(e),{method:"DELETE"})}setToken(e){this.token=e,localStorage.setItem("finspeed_token",e)}clearToken(){this.token=null,localStorage.removeItem("finspeed_token")}getToken(){return this.token}isAuthenticated(){return!!this.token}constructor(){this.token=null,this.baseUrl=s,this.token=localStorage.getItem("finspeed_token")}}let n=new a}},e=>{e.O(0,[857,803,447,358],()=>e(e.s=1048)),_N_E=e.O()}]);